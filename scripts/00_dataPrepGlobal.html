<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<style type="text/css">
@font-face {
font-family: octicons-link;
src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}
body {
-webkit-text-size-adjust: 100%;
text-size-adjust: 100%;
color: #333;
font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
font-size: 16px;
line-height: 1.6;
word-wrap: break-word;
}
a {
background-color: transparent;
}
a:active,
a:hover {
outline: 0;
}
strong {
font-weight: bold;
}
h1 {
font-size: 2em;
margin: 0.67em 0;
}
img {
border: 0;
}
hr {
box-sizing: content-box;
height: 0;
}
pre {
overflow: auto;
}
code,
kbd,
pre {
font-family: monospace, monospace;
font-size: 1em;
}
input {
color: inherit;
font: inherit;
margin: 0;
}
html input[disabled] {
cursor: default;
}
input {
line-height: normal;
}
input[type="checkbox"] {
box-sizing: border-box;
padding: 0;
}
table {
border-collapse: collapse;
border-spacing: 0;
}
td,
th {
padding: 0;
}
* {
box-sizing: border-box;
}
input {
font: 13px / 1.4 Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
}
a {
color: #4078c0;
text-decoration: none;
}
a:hover,
a:active {
text-decoration: underline;
}
hr {
height: 0;
margin: 15px 0;
overflow: hidden;
background: transparent;
border: 0;
border-bottom: 1px solid #ddd;
}
hr:before {
display: table;
content: "";
}
hr:after {
display: table;
clear: both;
content: "";
}
h1,
h2,
h3,
h4,
h5,
h6 {
margin-top: 15px;
margin-bottom: 15px;
line-height: 1.1;
}
h1 {
font-size: 30px;
}
h2 {
font-size: 21px;
}
h3 {
font-size: 16px;
}
h4 {
font-size: 14px;
}
h5 {
font-size: 12px;
}
h6 {
font-size: 11px;
}
blockquote {
margin: 0;
}
ul,
ol {
padding: 0;
margin-top: 0;
margin-bottom: 0;
}
ol ol,
ul ol {
list-style-type: lower-roman;
}
ul ul ol,
ul ol ol,
ol ul ol,
ol ol ol {
list-style-type: lower-alpha;
}
dd {
margin-left: 0;
}
code {
font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
font-size: 12px;
}
pre {
margin-top: 0;
margin-bottom: 0;
font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace;
}
.select::-ms-expand {
opacity: 0;
}
.octicon {
font: normal normal normal 16px/1 octicons-link;
display: inline-block;
text-decoration: none;
text-rendering: auto;
-webkit-font-smoothing: antialiased;
-moz-osx-font-smoothing: grayscale;
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
}
.octicon-link:before {
content: '\f05c';
}
.markdown-body:before {
display: table;
content: "";
}
.markdown-body:after {
display: table;
clear: both;
content: "";
}
.markdown-body>*:first-child {
margin-top: 0 !important;
}
.markdown-body>*:last-child {
margin-bottom: 0 !important;
}
a:not([href]) {
color: inherit;
text-decoration: none;
}
.anchor {
display: inline-block;
padding-right: 2px;
margin-left: -18px;
}
.anchor:focus {
outline: none;
}
h1,
h2,
h3,
h4,
h5,
h6 {
margin-top: 1em;
margin-bottom: 16px;
font-weight: bold;
line-height: 1.4;
}
h1 .octicon-link,
h2 .octicon-link,
h3 .octicon-link,
h4 .octicon-link,
h5 .octicon-link,
h6 .octicon-link {
color: #000;
vertical-align: middle;
visibility: hidden;
}
h1:hover .anchor,
h2:hover .anchor,
h3:hover .anchor,
h4:hover .anchor,
h5:hover .anchor,
h6:hover .anchor {
text-decoration: none;
}
h1:hover .anchor .octicon-link,
h2:hover .anchor .octicon-link,
h3:hover .anchor .octicon-link,
h4:hover .anchor .octicon-link,
h5:hover .anchor .octicon-link,
h6:hover .anchor .octicon-link {
visibility: visible;
}
h1 {
padding-bottom: 0.3em;
font-size: 2.25em;
line-height: 1.2;
border-bottom: 1px solid #eee;
}
h1 .anchor {
line-height: 1;
}
h2 {
padding-bottom: 0.3em;
font-size: 1.75em;
line-height: 1.225;
border-bottom: 1px solid #eee;
}
h2 .anchor {
line-height: 1;
}
h3 {
font-size: 1.5em;
line-height: 1.43;
}
h3 .anchor {
line-height: 1.2;
}
h4 {
font-size: 1.25em;
}
h4 .anchor {
line-height: 1.2;
}
h5 {
font-size: 1em;
}
h5 .anchor {
line-height: 1.1;
}
h6 {
font-size: 1em;
color: #777;
}
h6 .anchor {
line-height: 1.1;
}
p,
blockquote,
ul,
ol,
dl,
table,
pre {
margin-top: 0;
margin-bottom: 16px;
}
hr {
height: 4px;
padding: 0;
margin: 16px 0;
background-color: #e7e7e7;
border: 0 none;
}
ul,
ol {
padding-left: 2em;
}
ul ul,
ul ol,
ol ol,
ol ul {
margin-top: 0;
margin-bottom: 0;
}
li>p {
margin-top: 16px;
}
dl {
padding: 0;
}
dl dt {
padding: 0;
margin-top: 16px;
font-size: 1em;
font-style: italic;
font-weight: bold;
}
dl dd {
padding: 0 16px;
margin-bottom: 16px;
}
blockquote {
padding: 0 15px;
color: #777;
border-left: 4px solid #ddd;
}
blockquote>:first-child {
margin-top: 0;
}
blockquote>:last-child {
margin-bottom: 0;
}
table {
display: block;
width: 100%;
overflow: auto;
word-break: normal;
word-break: keep-all;
}
table th {
font-weight: bold;
}
table th,
table td {
padding: 6px 13px;
border: 1px solid #ddd;
}
table tr {
background-color: #fff;
border-top: 1px solid #ccc;
}
table tr:nth-child(2n) {
background-color: #f8f8f8;
}
img {
max-width: 100%;
box-sizing: content-box;
background-color: #fff;
}
code {
padding: 0;
padding-top: 0.2em;
padding-bottom: 0.2em;
margin: 0;
font-size: 85%;
background-color: rgba(0,0,0,0.04);
border-radius: 3px;
}
code:before,
code:after {
letter-spacing: -0.2em;
content: "\00a0";
}
pre>code {
padding: 0;
margin: 0;
font-size: 100%;
word-break: normal;
white-space: pre;
background: transparent;
border: 0;
}
.highlight {
margin-bottom: 16px;
}
.highlight pre,
pre {
padding: 16px;
overflow: auto;
font-size: 85%;
line-height: 1.45;
background-color: #f7f7f7;
border-radius: 3px;
}
.highlight pre {
margin-bottom: 0;
word-break: normal;
}
pre {
word-wrap: normal;
}
pre code {
display: inline;
max-width: initial;
padding: 0;
margin: 0;
overflow: initial;
line-height: inherit;
word-wrap: normal;
background-color: transparent;
border: 0;
}
pre code:before,
pre code:after {
content: normal;
}
kbd {
display: inline-block;
padding: 3px 5px;
font-size: 11px;
line-height: 10px;
color: #555;
vertical-align: middle;
background-color: #fcfcfc;
border: solid 1px #ccc;
border-bottom-color: #bbb;
border-radius: 3px;
box-shadow: inset 0 -1px 0 #bbb;
}
.pl-c {
color: #969896;
}
.pl-c1,
.pl-s .pl-v {
color: #0086b3;
}
.pl-e,
.pl-en {
color: #795da3;
}
.pl-s .pl-s1,
.pl-smi {
color: #333;
}
.pl-ent {
color: #63a35c;
}
.pl-k {
color: #a71d5d;
}
.pl-pds,
.pl-s,
.pl-s .pl-pse .pl-s1,
.pl-sr,
.pl-sr .pl-cce,
.pl-sr .pl-sra,
.pl-sr .pl-sre {
color: #183691;
}
.pl-v {
color: #ed6a43;
}
.pl-id {
color: #b52a1d;
}
.pl-ii {
background-color: #b52a1d;
color: #f8f8f8;
}
.pl-sr .pl-cce {
color: #63a35c;
font-weight: bold;
}
.pl-ml {
color: #693a17;
}
.pl-mh,
.pl-mh .pl-en,
.pl-ms {
color: #1d3e81;
font-weight: bold;
}
.pl-mq {
color: #008080;
}
.pl-mi {
color: #333;
font-style: italic;
}
.pl-mb {
color: #333;
font-weight: bold;
}
.pl-md {
background-color: #ffecec;
color: #bd2c00;
}
.pl-mi1 {
background-color: #eaffea;
color: #55a532;
}
.pl-mdr {
color: #795da3;
font-weight: bold;
}
.pl-mo {
color: #1d3e81;
}
kbd {
display: inline-block;
padding: 3px 5px;
font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
line-height: 10px;
color: #555;
vertical-align: middle;
background-color: #fcfcfc;
border: solid 1px #ccc;
border-bottom-color: #bbb;
border-radius: 3px;
box-shadow: inset 0 -1px 0 #bbb;
}
.task-list-item {
list-style-type: none;
}
.task-list-item+.task-list-item {
margin-top: 3px;
}
.task-list-item input {
margin: 0 0.35em 0.25em -1.6em;
vertical-align: middle;
}
:checked+.radio-label {
z-index: 1;
position: relative;
border-color: #4078c0;
}
.sourceLine {
display: inline-block;
}
code .kw { color: #000000; }
code .dt { color: #ed6a43; }
code .dv { color: #009999; }
code .bn { color: #009999; }
code .fl { color: #009999; }
code .ch { color: #009999; }
code .st { color: #183691; }
code .co { color: #969896; }
code .ot { color: #0086b3; }
code .al { color: #a61717; }
code .fu { color: #63a35c; }
code .er { color: #a61717; background-color: #e3d2d2; }
code .wa { color: #000000; }
code .cn { color: #008080; }
code .sc { color: #008080; }
code .vs { color: #183691; }
code .ss { color: #183691; }
code .im { color: #000000; }
code .va {color: #008080; }
code .cf { color: #000000; }
code .op { color: #000000; }
code .bu { color: #000000; }
code .ex { color: #000000; }
code .pp { color: #999999; }
code .at { color: #008080; }
code .do { color: #969896; }
code .an { color: #008080; }
code .cv { color: #008080; }
code .in { color: #008080; }
</style>
<style>
body {
  box-sizing: border-box;
  min-width: 200px;
  max-width: 980px;
  margin: 0 auto;
  padding: 45px;
  padding-top: 0px;
}
</style>

</head>

<body>

<h1 id="data-preparation-for-global-covid-19-cases">Data Preparation for Global COVID-19 Cases</h1>
<p>Michael Harper</p>
<h1 id="about">About</h1>
<p>This document loads and preprocesses the data which is used for further analysis:</p>
<ul>
<li>Merges John Hopkins into single dataset</li>
<li>Resolves name differences with spatial dataset and other files</li>
<li>Enriches data by calculating additional metrics such as cases per million, rate of change</li>
</ul>
<!-- end list -->

<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">knitr<span class="op">::</span>opts_chunk<span class="op">$</span><span class="kw">set</span>(<span class="dt">echo =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"></a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw">library</span>(readr)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5"><span class="kw">library</span>(sf)</a></code></pre></div>
<h1 id="specify-global-naming">Specify Global Naming</h1>
<p>The analysis uses different datasets which slightly different naming conventions. For example, some datasets had <code>United States</code> while other had <code>US</code>. A dictionary of replacement names was therefore created which is later used to recode the data. The <code>recode</code> function is used throughout the example referring to the following list:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co"># Resolves inconsistencies between naming in data sources</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="co"># Not all datasets have inconsistences but set here and applied to all</span></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">countryNameDict &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Czech Republic&quot;</span> =<span class="st"> &quot;Czechia&quot;</span>,</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">                     <span class="st">&quot;United Kingdom&quot;</span> =<span class="st"> &quot;UK&quot;</span>,</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">                     <span class="st">&quot;Bosnia Herzegovina&quot;</span> =<span class="st"> &quot;Bosnia and Herzegovina&quot;</span>,</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">                     <span class="st">&quot;Iran, Islamic Rep.&quot;</span> =<span class="st"> &quot;Iran&quot;</span>,</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">                     <span class="st">&quot;Macedonia&quot;</span> =<span class="st"> &quot;North Macedonia&quot;</span>,</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">                     <span class="st">&quot;United States&quot;</span> =<span class="st"> &quot;US&quot;</span>,</a>
<a class="sourceLine" id="cb2-9" data-line-number="9">                     <span class="st">&quot;Russian Federation&quot;</span> =<span class="st"> &quot;Russia&quot;</span>,</a>
<a class="sourceLine" id="cb2-10" data-line-number="10">                     <span class="st">&quot;Dem. Rep. Korea&quot;</span> =<span class="st"> &quot;North Korea&quot;</span>,</a>
<a class="sourceLine" id="cb2-11" data-line-number="11">                     <span class="st">&quot;Congo (Kinshasa)&quot;</span> =<span class="st"> &quot;DRC&quot;</span>,</a>
<a class="sourceLine" id="cb2-12" data-line-number="12">                     <span class="st">&quot;Democratic Republic of the Congo&quot;</span> =<span class="st"> &quot;DRC&quot;</span>,</a>
<a class="sourceLine" id="cb2-13" data-line-number="13">                     <span class="st">&quot;Congo (Brazzaville)&quot;</span> =<span class="st"> &quot;Congo&quot;</span>,</a>
<a class="sourceLine" id="cb2-14" data-line-number="14">                     <span class="st">&quot;Republic of the Congo&quot;</span> =<span class="st"> &quot;Congo&quot;</span>,</a>
<a class="sourceLine" id="cb2-15" data-line-number="15">                     <span class="st">&quot;Côte d'Ivoire&quot;</span> =<span class="st"> &quot;Cote d'Ivoire&quot;</span>,</a>
<a class="sourceLine" id="cb2-16" data-line-number="16">                     <span class="st">&quot;Bahamas, The&quot;</span> =<span class="st"> &quot;Bahamas&quot;</span>,</a>
<a class="sourceLine" id="cb2-17" data-line-number="17">                     <span class="st">&quot;Taiwan*&quot;</span> =<span class="st"> &quot;Taiwan&quot;</span>,</a>
<a class="sourceLine" id="cb2-18" data-line-number="18">                     <span class="st">&quot;Korea, South&quot;</span> =<span class="st"> &quot;South Korea&quot;</span>)</a></code></pre></div>
<h1 id="loading-john-hopkins-dataset">Loading John Hopkins Dataset</h1>
<p>For the analysis, I am using the COVID-19 dataset produced by John Hopkins University. They provide a daily updating dataset at a national level, which provides the cases, recoveries and deaths associated with the virus. The data can be accessed through the GitHub <a href="https://github.com/CSSEGISandData/COVID-19">repository here</a>, and they also offer a great dashboard for visualising the data <a href="https://coronavirus.jhu.edu/map.html">here</a>.</p>
<p>There are three separate files for different records stored within the following directory:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co"># Using the John hopkins dataset which updates daily</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">rootDir &lt;-<span class="st"> &quot;https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series&quot;</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"></a>
<a class="sourceLine" id="cb3-4" data-line-number="4">files &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;time_series_covid19_confirmed_global.csv&quot;</span>, <span class="st">&quot;time_series_covid19_deaths_global.csv&quot;</span>)</a></code></pre></div>
<p>When the data is loaded, some basic data cleaning to make the data usable for graphing. For those familiar with the tidyverse in R, most functions prefer to have data in <a href="http://www.cookbook-r.com/Manipulating_data/Converting_data_between_wide_and_long_format/">long format</a>.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="co"># Function clean data for each of the files and aggregate</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">dataToLong &lt;-<span class="st"> </span><span class="cf">function</span>(filename, var){</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">  </a>
<a class="sourceLine" id="cb4-4" data-line-number="4">  df &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="kw">file.path</span>(rootDir, filename), <span class="dt">col_types =</span> <span class="kw">cols</span>())</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">  </a>
<a class="sourceLine" id="cb4-6" data-line-number="6">  <span class="co"># Convert to long data</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7">  dataLong &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="st">    </span>df <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="st">    </span>tidyr<span class="op">::</span><span class="kw">gather</span>(<span class="dt">key =</span> <span class="st">&quot;date&quot;</span>, <span class="st">&quot;cases&quot;</span>, <span class="op">-</span><span class="kw">c</span>(<span class="st">&quot;Province/State&quot;</span>,  <span class="st">&quot;Country/Region&quot;</span>, <span class="st">&quot;Lat&quot;</span>, <span class="st">&quot;Long&quot;</span>))</a>
<a class="sourceLine" id="cb4-10" data-line-number="10">  </a>
<a class="sourceLine" id="cb4-11" data-line-number="11">  <span class="co"># Aggregate to only have a single region per country</span></a>
<a class="sourceLine" id="cb4-12" data-line-number="12">  df_all &lt;-</a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="st">    </span>dataLong <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="st">    </span><span class="kw">set_names</span>(<span class="kw">c</span>(<span class="st">&quot;province&quot;</span>, <span class="st">&quot;region&quot;</span>, <span class="st">&quot;lat&quot;</span>, <span class="st">&quot;long&quot;</span>, <span class="st">&quot;date&quot;</span>, <span class="st">&quot;value&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="st">    </span><span class="kw">group_by</span>(region, date) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-16" data-line-number="16"><span class="st">    </span><span class="kw">summarise</span>(<span class="dt">value =</span> <span class="kw">sum</span>(value)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-17" data-line-number="17"><span class="st">    </span><span class="kw">ungroup</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-18" data-line-number="18"><span class="st">    </span><span class="kw">mutate</span>(<span class="dt">date =</span> lubridate<span class="op">::</span><span class="kw">parse_date_time</span>(date, <span class="st">&quot;%m%d%y&quot;</span>),</a>
<a class="sourceLine" id="cb4-19" data-line-number="19">           <span class="dt">region =</span> <span class="kw">recode</span>(region, <span class="op">!!!</span>countryNameDict), </a>
<a class="sourceLine" id="cb4-20" data-line-number="20">           <span class="dt">type =</span> var)</a>
<a class="sourceLine" id="cb4-21" data-line-number="21">  </a>
<a class="sourceLine" id="cb4-22" data-line-number="22">  <span class="kw">return</span>(df_all)</a>
<a class="sourceLine" id="cb4-23" data-line-number="23">} </a></code></pre></div>
<p>This function is run across all three input dataframes and then merged into a single dataframe:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="co"># Combine data</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2">df_all &lt;-<span class="st"> </span><span class="kw">map2_df</span>(<span class="dt">.x =</span> files,</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">                  <span class="dt">.y =</span> <span class="kw">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;deaths&quot;</span>),</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">                  <span class="dt">.f =</span> <span class="cf">function</span>(x,y) <span class="kw">dataToLong</span>(x,y))</a></code></pre></div>
<h1 id="calculate-additional-metrics">Calculate Additional Metrics</h1>
<p>Some additional metrics are calculated from the raw data:</p>
<ul>
<li><code>rate of change</code>: how many new cases have there been since the day before and 7 days previous estimates.</li>
<li><code>days Since outbreak</code> calculates how long it has been since the first reported case in a country</li>
</ul>
<!-- end list -->

<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="co"># calculate when the first reported case was</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2">firstOutbreak &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="st">  </span>df_all <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="st">  </span><span class="kw">filter</span>(type <span class="op">==</span><span class="st"> &quot;cases&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="st">  </span><span class="kw">filter</span>(value <span class="op">!=</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="st">  </span><span class="kw">group_by</span>(region) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="st">  </span><span class="kw">filter</span>(date <span class="op">==</span><span class="st"> </span><span class="kw">min</span>(date)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">firstOutbreak =</span> date) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">c</span>(date, value, type))</a>
<a class="sourceLine" id="cb6-10" data-line-number="10"></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co"># do the same as above, but this time work out when they passed the 200th case</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12">first200Outbreak &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="st">  </span>df_all <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="st">  </span><span class="kw">filter</span>(type <span class="op">==</span><span class="st"> &quot;cases&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="st">  </span><span class="kw">filter</span>(value <span class="op">&gt;</span><span class="st"> </span><span class="dv">200</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="st">  </span><span class="kw">group_by</span>(region) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="st">  </span><span class="kw">filter</span>(date <span class="op">==</span><span class="st"> </span><span class="kw">min</span>(date)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-18" data-line-number="18"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">first200Outbreak =</span> date) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-19" data-line-number="19"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">c</span>(date, value, type))</a>
<a class="sourceLine" id="cb6-20" data-line-number="20"></a>
<a class="sourceLine" id="cb6-21" data-line-number="21">firstDeath &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb6-22" data-line-number="22"><span class="st">  </span>df_all <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-23" data-line-number="23"><span class="st">  </span><span class="kw">filter</span>(type <span class="op">==</span><span class="st"> &quot;deaths&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-24" data-line-number="24"><span class="st">  </span><span class="kw">filter</span>(value <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-25" data-line-number="25"><span class="st">  </span><span class="kw">group_by</span>(region) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-26" data-line-number="26"><span class="st">  </span><span class="kw">filter</span>(date <span class="op">==</span><span class="st"> </span><span class="kw">min</span>(date)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-27" data-line-number="27"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">firstDeath =</span> date) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-28" data-line-number="28"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">c</span>(date, value, type))</a>
<a class="sourceLine" id="cb6-29" data-line-number="29"></a>
<a class="sourceLine" id="cb6-30" data-line-number="30">first10Deaths &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb6-31" data-line-number="31"><span class="st">  </span>df_all <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-32" data-line-number="32"><span class="st">  </span><span class="kw">filter</span>(type <span class="op">==</span><span class="st"> &quot;deaths&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-33" data-line-number="33"><span class="st">  </span><span class="kw">filter</span>(value <span class="op">&gt;</span><span class="st"> </span><span class="dv">10</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-34" data-line-number="34"><span class="st">  </span><span class="kw">group_by</span>(region) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-35" data-line-number="35"><span class="st">  </span><span class="kw">filter</span>(date <span class="op">==</span><span class="st"> </span><span class="kw">min</span>(date)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-36" data-line-number="36"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">first10Deaths =</span> date) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-37" data-line-number="37"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">c</span>(date, value, type))</a>
<a class="sourceLine" id="cb6-38" data-line-number="38"></a>
<a class="sourceLine" id="cb6-39" data-line-number="39"><span class="co"># Calculate additional metrics such as rate of contagion</span></a>
<a class="sourceLine" id="cb6-40" data-line-number="40">df_cases_extra &lt;-</a>
<a class="sourceLine" id="cb6-41" data-line-number="41"><span class="st">  </span>df_all <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-42" data-line-number="42"><span class="st">  </span><span class="kw">left_join</span>(firstOutbreak) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-43" data-line-number="43"><span class="st">  </span><span class="kw">left_join</span>(first200Outbreak) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-44" data-line-number="44"><span class="st">  </span><span class="kw">left_join</span>(firstDeath) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-45" data-line-number="45"><span class="st">  </span><span class="kw">left_join</span>(first10Deaths) <span class="op">%&gt;%</span><span class="st">  </span></a>
<a class="sourceLine" id="cb6-46" data-line-number="46"><span class="st">  </span><span class="kw">group_by</span>(region, type) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-47" data-line-number="47"><span class="st">  </span><span class="kw">arrange</span>(region, type, date) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-48" data-line-number="48"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">daysSinceOutbreak =</span> <span class="kw">as.numeric</span>(date <span class="op">-</span><span class="st"> </span>firstOutbreak)<span class="op">/</span><span class="dv">86400</span> <span class="op">+</span><span class="st"> </span><span class="dv">1</span>,</a>
<a class="sourceLine" id="cb6-49" data-line-number="49">         <span class="dt">daysSinceOutbreak =</span> <span class="kw">ifelse</span>(daysSinceOutbreak <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, daysSinceOutbreak),</a>
<a class="sourceLine" id="cb6-50" data-line-number="50">         <span class="dt">daysSinceFirstDeath =</span> <span class="kw">as.numeric</span>(date <span class="op">-</span><span class="st"> </span>firstDeath)<span class="op">/</span><span class="dv">86400</span> <span class="op">+</span><span class="st"> </span><span class="dv">1</span>,</a>
<a class="sourceLine" id="cb6-51" data-line-number="51">         <span class="dt">daysSinceFirstDeath =</span> <span class="kw">ifelse</span>(daysSinceFirstDeath <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, daysSinceFirstDeath),</a>
<a class="sourceLine" id="cb6-52" data-line-number="52">         <span class="dt">daysSince10Deaths =</span> <span class="kw">as.numeric</span>(date <span class="op">-</span><span class="st"> </span>first10Deaths)<span class="op">/</span><span class="dv">86400</span> <span class="op">+</span><span class="st"> </span><span class="dv">1</span>,</a>
<a class="sourceLine" id="cb6-53" data-line-number="53">         <span class="dt">daysSince10Deaths =</span> <span class="kw">ifelse</span>(daysSince10Deaths <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, daysSince10Deaths),</a>
<a class="sourceLine" id="cb6-54" data-line-number="54">         <span class="dt">daysSince200Outbreak =</span> <span class="kw">as.numeric</span>(date <span class="op">-</span><span class="st"> </span>first200Outbreak)<span class="op">/</span><span class="dv">86400</span> <span class="op">+</span><span class="st"> </span><span class="dv">1</span>,</a>
<a class="sourceLine" id="cb6-55" data-line-number="55">         <span class="dt">daysSince200Outbreak =</span> <span class="kw">ifelse</span>(daysSince200Outbreak <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span>, <span class="ot">NA</span>, daysSince200Outbreak),</a>
<a class="sourceLine" id="cb6-56" data-line-number="56">         <span class="dt">changeDaily =</span> value <span class="op">-</span><span class="st"> </span><span class="kw">lag</span>(value, <span class="dt">n =</span> <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb6-57" data-line-number="57">         <span class="dt">changeWeekly =</span> value <span class="op">-</span><span class="st"> </span><span class="kw">lag</span>(value, <span class="dt">n =</span> <span class="dv">7</span>),</a>
<a class="sourceLine" id="cb6-58" data-line-number="58">         <span class="dt">changeDailyPerc =</span> <span class="kw">round</span>(changeDaily<span class="op">/</span>value <span class="op">*</span><span class="st"> </span><span class="dv">100</span>, <span class="dv">0</span>),</a>
<a class="sourceLine" id="cb6-59" data-line-number="59">         <span class="dt">changeDailyPerc =</span> <span class="kw">ifelse</span>(<span class="kw">is.nan</span>(changeDailyPerc), <span class="ot">NA</span>, changeDailyPerc),</a>
<a class="sourceLine" id="cb6-60" data-line-number="60">         <span class="dt">changeWeeklyPerc =</span> <span class="kw">round</span>(changeWeekly<span class="op">/</span>value <span class="op">*</span><span class="st"> </span><span class="dv">100</span>, <span class="dv">0</span>),</a>
<a class="sourceLine" id="cb6-61" data-line-number="61">         <span class="dt">changeWeeklyPerc =</span> <span class="kw">ifelse</span>(<span class="kw">is.nan</span>(changeWeeklyPerc), <span class="ot">NA</span>, changeWeeklyPerc)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-62" data-line-number="62"><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">c</span>(firstOutbreak, first200Outbreak, firstDeath, first10Deaths))</a></code></pre></div>
<h1 id="load-population-data">Load Population Data</h1>
<p>To calculate normalised infection rates, we will use the population dataset from the <a href="https://data.worldbank.org/indicator/SP.POP.TOTL">WorldBank</a>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># World bank population estimates</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">pop &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;dataIn/worldBankPop.csv&quot;</span>,</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">                <span class="dt">col_types =</span> <span class="kw">cols</span>()) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="st">  </span><span class="kw">select</span>(<span class="kw">c</span>(<span class="st">&quot;Country Name&quot;</span>, <span class="st">&quot;2018&quot;</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="st">  </span><span class="kw">set_names</span>(<span class="st">&quot;region&quot;</span>, <span class="st">&quot;pop&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">pop =</span> <span class="kw">round</span>(pop<span class="op">/</span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span>, <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb7-7" data-line-number="7">         <span class="dt">region =</span> <span class="kw">recode</span>(region, <span class="op">!!!</span>countryNameDict))</a></code></pre></div>
<p>This is merged with the full dataset and then used to calculate the infection rates:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co"># Merge data with shapefile</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co"># Normalise rates</span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3">df_all_extra &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="st">  </span>df_cases_extra <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="st">  </span><span class="kw">left_join</span>(pop) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">value =</span> <span class="kw">replace_na</span>(value, <span class="dv">0</span>),</a>
<a class="sourceLine" id="cb8-7" data-line-number="7">         <span class="dt">casespermillion =</span> <span class="kw">round</span>(value<span class="op">/</span>pop, <span class="dv">2</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="st">  </span><span class="kw">arrange</span>(region, date)</a></code></pre></div>
<h1 id="spatial-data">Spatial Data</h1>
<p>Spatial data is useful for visualising the datasets. These are formatted to be consistent with the second dataset, making renaming the fields to match and altering names to match to enable an easy spatial join:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co"># Load global boundaries</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">world_map &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="st">  </span>spData<span class="op">::</span>world <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="st">  </span><span class="kw">st_as_sf</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="st">  </span><span class="kw">select</span>(name_long, continent) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="st">  </span><span class="kw">rename</span>(<span class="st">&quot;region&quot;</span> =<span class="st"> &quot;name_long&quot;</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="st">  </span><span class="kw">filter</span>(region <span class="op">!=</span><span class="st"> &quot;Antarctica&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># Not useful display antartica</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">region =</span> <span class="kw">recode</span>(region, <span class="op">!!!</span>countryNameDict))</a></code></pre></div>
<p>These can be merged into a single long data format. Note this format is not very efficient for storage as it duplicates the spatial data, but is required to make it easy to use within the <strong>tidyverse</strong> workflow:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co"># This is not saved as it takes up more space 70+ MBs</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2">df_all_spatial &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="st">  </span>df_all_extra <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="st">  </span><span class="kw">left_join</span>(world_map)</a>
<a class="sourceLine" id="cb10-5" data-line-number="5"></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co"># Retain the continent variable</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7">df_all_extra &lt;-<span class="st"> </span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8">df_all_spatial <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="st">  </span><span class="kw">st_as_sf</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="st">  </span>sf<span class="op">::</span><span class="kw">st_drop_geometry</span>()</a></code></pre></div>
<h1 id="save-data">Save Data</h1>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw">write_csv</span>(df_all_extra, <span class="st">&quot;../data/global/covid_data_global.csv&quot;</span>, <span class="dt">append =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"></a>
<a class="sourceLine" id="cb11-3" data-line-number="3">sf<span class="op">::</span><span class="kw">write_sf</span>(world_map, <span class="st">&quot;../data/global/covid_data_global_boundaries.geojson&quot;</span>, <span class="dt">delete_dsn =</span> T)</a></code></pre></div>
<p>f</p>
<h1 id="session-info">Session Info</h1>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="kw">sessionInfo</span>()</a></code></pre></div>
<pre><code>## R version 3.6.0 (2019-04-26)
## Platform: x86_64-apple-darwin15.6.0 (64-bit)
## Running under: macOS  10.15.4
## 
## Matrix products: default
## BLAS:   /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
## LAPACK: /Library/Frameworks/R.framework/Versions/3.6/Resources/lib/libRlapack.dylib
## 
## locale:
## [1] en_GB.UTF-8/en_GB.UTF-8/en_GB.UTF-8/C/en_GB.UTF-8/en_GB.UTF-8
## 
## attached base packages:
## [1] grid      stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] magick_2.3           ggthemr_1.1.0        patchwork_0.0.1.9000 gganimate_1.0.5      maps_3.3.0           sf_0.8-0             forcats_0.4.0        stringr_1.4.0       
##  [9] dplyr_0.8.5          purrr_0.3.3          tidyr_0.8.3          tibble_2.1.3         ggplot2_3.3.0        tidyverse_1.2.1      readr_1.3.1          here_0.1            
## 
## loaded via a namespace (and not attached):
##  [1] nlme_3.1-140          matrixStats_0.54.0    lubridate_1.7.4       progress_1.2.2        httr_1.4.1            rprojroot_1.3-2       rstan_2.18.2         
##  [8] tools_3.6.0           backports_1.1.5       R6_2.4.1              KernSmooth_2.23-15    spData_0.3.2          DBI_1.1.0             mgcv_1.8-28          
## [15] colorspace_1.4-1      withr_2.1.2           tidyselect_1.0.0      gridExtra_2.3         prettyunits_1.1.1     processx_3.4.2        curl_4.3             
## [22] compiler_3.6.0        cli_2.0.2             rvest_0.3.4           xml2_1.2.5            labeling_0.3          scales_1.1.0          classInt_0.4-2       
## [29] callr_3.4.2           digest_0.6.25         StanHeaders_2.18.1-10 rmarkdown_2.1         pkgconfig_2.0.3       htmltools_0.4.0       rlang_0.4.5          
## [36] ggthemes_4.2.0        readxl_1.3.1          rstudioapi_0.11       prettydoc_0.3.1       farver_2.0.3          generics_0.0.2        jsonlite_1.6.1       
## [43] inline_0.3.15         magrittr_1.5          loo_2.1.0             Matrix_1.2-17         Rcpp_1.0.4            munsell_0.5.0         fansi_0.4.1          
## [50] lifecycle_0.2.0       stringi_1.4.6         yaml_2.2.1            pkgbuild_1.0.6        parallel_3.6.0        ggrepel_0.8.1         crayon_1.3.4         
## [57] lattice_0.20-38       haven_2.1.0           splines_3.6.0         hms_0.4.2             knitr_1.28            ps_1.3.2              pillar_1.4.3         
## [64] stats4_3.6.0          glue_1.3.2            packrat_0.5.0         evaluate_0.14         gifski_0.8.6          modelr_0.1.4          vctrs_0.2.4          
## [71] tweenr_1.0.1          cellranger_1.1.0      gtable_0.3.0          assertthat_0.2.1      xfun_0.12             broom_0.5.2           e1071_1.7-3          
## [78] rsconnect_0.8.13      class_7.3-15          units_0.6-5           spDataLarge_0.3.1
</code></pre>

</body>
</html>
